import { __decorate, __metadata } from "tslib";
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import Typed from 'typed.js';
let NgxTypedJsComponent = class NgxTypedJsComponent {
    constructor() {
        this.completed = new EventEmitter();
        this.preStringTyped = new EventEmitter();
        this.stringTyped = new EventEmitter();
        this.lastStringBackspaced = new EventEmitter();
        this.typingPaused = new EventEmitter();
        this.typingResumed = new EventEmitter();
        this.reset = new EventEmitter();
        this.stopped = new EventEmitter();
        this.started = new EventEmitter();
        this.destroyed = new EventEmitter();
    }
    ngAfterViewInit() {
        this.typed = new Typed(this.content.nativeElement.querySelector('.typing'), this.options);
        if (this.showCursor !== false) {
            this.updateCursorStyle();
        }
    }
    toggle() {
        this.typed.toggle();
    }
    stop() {
        this.typed.stop();
    }
    start() {
        this.typed.start();
    }
    destroy() {
        this.typed.destroy();
    }
    doReset(restart) {
        this.typed.reset(restart);
    }
    get options() {
        const emit = (emitter) => () => emitter.emit();
        const emitIndex = (emitter) => (index) => emitter.emit(index);
        const opts = {
            strings: this.strings,
            stringsElement: this.stringsElement,
            typeSpeed: this.typeSpeed,
            startDelay: this.startDelay,
            backSpeed: this.backSpeed,
            smartBackspace: this.smartBackspace,
            shuffle: this.shuffle,
            backDelay: this.backDelay,
            fadeOut: this.fadeOut,
            fadeOutClass: this.fadeOutClass,
            fadeOutDelay: this.fadeOutDelay,
            loop: this.loop,
            loopCount: this.loopCount,
            showCursor: this.showCursor,
            autoInsertCss: this.autoInsertCss,
            attr: this.attr,
            bindInputFocusEvents: this.bindInputFocusEvents,
            contentType: this.contentType,
            onComplete: emit(this.completed),
            preStringTyped: emitIndex(this.preStringTyped),
            onStringTyped: emitIndex(this.stringTyped),
            onLastStringBackspaced: emit(this.lastStringBackspaced),
            onTypingPaused: emitIndex(this.typingPaused),
            onTypingResumed: emitIndex(this.typingResumed),
            onReset: emit(this.reset),
            onStop: emitIndex(this.stopped),
            onStart: emitIndex(this.started),
            onDestroy: emit(this.destroyed),
        };
        Object.keys(opts).forEach(key => {
            if (opts[key] === undefined) {
                delete opts[key];
            }
        });
        return opts;
    }
    updateCursorStyle() {
        const textElementStyle = getComputedStyle(this.content.nativeElement.querySelector('.typing'));
        const cursorElementStyle = this.content.nativeElement.querySelector('.typed-cursor').style;
        cursorElementStyle.fontSize = textElementStyle.fontSize;
        cursorElementStyle.color = this.cursorColor || textElementStyle.color;
    }
};
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "cursorColor", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], NgxTypedJsComponent.prototype, "strings", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "stringsElement", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgxTypedJsComponent.prototype, "typeSpeed", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgxTypedJsComponent.prototype, "startDelay", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgxTypedJsComponent.prototype, "backSpeed", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "smartBackspace", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "shuffle", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgxTypedJsComponent.prototype, "backDelay", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "fadeOut", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "fadeOutClass", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "fadeOutDelay", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "loop", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], NgxTypedJsComponent.prototype, "loopCount", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "showCursor", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "cursorChar", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "autoInsertCss", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "attr", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], NgxTypedJsComponent.prototype, "bindInputFocusEvents", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], NgxTypedJsComponent.prototype, "contentType", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "completed", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "preStringTyped", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "stringTyped", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "lastStringBackspaced", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "typingPaused", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "typingResumed", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "reset", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "stopped", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "started", void 0);
__decorate([
    Output(),
    __metadata("design:type", EventEmitter)
], NgxTypedJsComponent.prototype, "destroyed", void 0);
__decorate([
    ViewChild('wrapper', { static: true }),
    __metadata("design:type", Object)
], NgxTypedJsComponent.prototype, "content", void 0);
NgxTypedJsComponent = __decorate([
    Component({
        selector: 'ngx-typed-js',
        template: "<div #wrapper>\n  <ng-content></ng-content>\n</div>\n",
        styles: [":host>>>.typing{display:inline}"]
    })
], NgxTypedJsComponent);
export { NgxTypedJsComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXR5cGVkLWpzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC10eXBlZC1qcy8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtdHlwZWQtanMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQWdCLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDL0YsT0FBTyxLQUFxQixNQUFNLFVBQVUsQ0FBQztBQU83QyxJQUFhLG1CQUFtQixHQUFoQyxNQUFhLG1CQUFtQjtJQUFoQztRQXVCb0IsY0FBUyxHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDO1FBQ3pELG1CQUFjLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDbEUsZ0JBQVcsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUMvRCx5QkFBb0IsR0FBdUIsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUNwRSxpQkFBWSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQ2hFLGtCQUFhLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDakUsVUFBSyxHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDO1FBQ3JELFlBQU8sR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUMzRCxZQUFPLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDM0QsY0FBUyxHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDO0lBMEY3RSxDQUFDO0lBckZDLGVBQWU7UUFDYixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUNwQixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEVBQ25ELElBQUksQ0FBQyxPQUFPLENBQ2IsQ0FBQztRQUVGLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7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QUN2QztJQUFSLEtBQUssRUFBRTs7d0RBQThCO0FBRTVCO0lBQVQsTUFBTSxFQUFFOzhCQUFvQixZQUFZO3NEQUFrQztBQUNqRTtJQUFULE1BQU0sRUFBRTs4QkFBeUIsWUFBWTsyREFBc0M7QUFDMUU7SUFBVCxNQUFNLEVBQUU7OEJBQXNCLFlBQVk7d0RBQXNDO0FBQ3ZFO0lBQVQsTUFBTSxFQUFFOzhCQUErQixZQUFZO2lFQUFrQztBQUM1RTtJQUFULE1BQU0sRUFBRTs4QkFBdUIsWUFBWTt5REFBc0M7QUFDeEU7SUFBVCxNQUFNLEVBQUU7OEJBQXdCLFlBQVk7MERBQXNDO0FBQ3pFO0lBQVQsTUFBTSxFQUFFOzhCQUFnQixZQUFZO2tEQUFrQztBQUM3RDtJQUFULE1BQU0sRUFBRTs4QkFBa0IsWUFBWTtvREFBc0M7QUFDbkU7SUFBVCxNQUFNLEVBQUU7OEJBQWtCLFlBQVk7b0RBQXNDO0FBQ25FO0lBQVQsTUFBTSxFQUFFOzhCQUFvQixZQUFZO3NEQUFrQztBQUduQztJQUF2QyxTQUFTLENBQUMsU0FBUyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDOztvREFBaUI7QUFuQzdDLG1CQUFtQjtJQUwvQixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsY0FBYztRQUN4QixpRUFBMEM7O0tBRTNDLENBQUM7R0FDVyxtQkFBbUIsQ0EwSC9CO1NBMUhZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgVHlwZWQsIHtUeXBlZE9wdGlvbnN9IGZyb20gJ3R5cGVkLmpzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmd4LXR5cGVkLWpzJyxcbiAgdGVtcGxhdGVVcmw6ICduZ3gtdHlwZWQtanMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnbmd4LXR5cGVkLWpzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hUeXBlZEpzQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gIEBJbnB1dCgpIHByaXZhdGUgY3Vyc29yQ29sb3I/OiBzdHJpbmc7XG5cbiAgQElucHV0KCkgcHJpdmF0ZSBzdHJpbmdzPzogc3RyaW5nW107XG4gIEBJbnB1dCgpIHByaXZhdGUgc3RyaW5nc0VsZW1lbnQ/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHByaXZhdGUgdHlwZVNwZWVkPzogbnVtYmVyO1xuICBASW5wdXQoKSBwcml2YXRlIHN0YXJ0RGVsYXk/OiBudW1iZXI7XG4gIEBJbnB1dCgpIHByaXZhdGUgYmFja1NwZWVkPzogbnVtYmVyO1xuICBASW5wdXQoKSBwcml2YXRlIHNtYXJ0QmFja3NwYWNlPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBzaHVmZmxlPzogYm9vbGVhbjtcbiAgQElucHV0KCkgcHJpdmF0ZSBiYWNrRGVsYXk/OiBudW1iZXI7XG4gIEBJbnB1dCgpIHByaXZhdGUgZmFkZU91dD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgZmFkZU91dENsYXNzPzogc3RyaW5nO1xuICBASW5wdXQoKSBwcml2YXRlIGZhZGVPdXREZWxheT86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgbG9vcD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgbG9vcENvdW50PzogbnVtYmVyO1xuICBASW5wdXQoKSBwcml2YXRlIHNob3dDdXJzb3I/OiBib29sZWFuO1xuICBASW5wdXQoKSBwcml2YXRlIGN1cnNvckNoYXI/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHByaXZhdGUgYXV0b0luc2VydENzcz86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgYXR0cj86IHN0cmluZztcbiAgQElucHV0KCkgcHJpdmF0ZSBiaW5kSW5wdXRGb2N1c0V2ZW50cz86IGJvb2xlYW47XG4gIEBJbnB1dCgpIHByaXZhdGUgY29udGVudFR5cGU/OiBzdHJpbmc7XG5cbiAgQE91dHB1dCgpIHByaXZhdGUgY29tcGxldGVkOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoKSBwcml2YXRlIHByZVN0cmluZ1R5cGVkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBzdHJpbmdUeXBlZDogRXZlbnRFbWl0dGVyPG51bWJlcj4gPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgQE91dHB1dCgpIHByaXZhdGUgbGFzdFN0cmluZ0JhY2tzcGFjZWQ6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgQE91dHB1dCgpIHByaXZhdGUgdHlwaW5nUGF1c2VkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSB0eXBpbmdSZXN1bWVkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSByZXNldDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBzdG9wcGVkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBzdGFydGVkOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBkZXN0cm95ZWQ6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBwcml2YXRlIHR5cGVkOiBUeXBlZDtcbiAgQFZpZXdDaGlsZCgnd3JhcHBlcicsIHsgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgY29udGVudDtcblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy50eXBlZCA9IG5ldyBUeXBlZChcbiAgICAgIHRoaXMuY29udGVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50eXBpbmcnKSxcbiAgICAgIHRoaXMub3B0aW9ucyxcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuc2hvd0N1cnNvciAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlKCk6IHZvaWQge1xuICAgIHRoaXMudHlwZWQudG9nZ2xlKCk7XG4gIH1cblxuICBwdWJsaWMgc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkLnN0b3AoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkLnN0YXJ0KCk7XG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLnR5cGVkLmRlc3Ryb3koKTtcbiAgfVxuXG4gIHB1YmxpYyBkb1Jlc2V0KHJlc3RhcnQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy50eXBlZC5yZXNldChyZXN0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IG9wdGlvbnMoKTogVHlwZWRPcHRpb25zIHtcbiAgICBjb25zdCBlbWl0OiAoZW1pdHRlcjogRXZlbnRFbWl0dGVyPHZvaWQ+KSA9PiAoc2VsZjogVHlwZWQpID0+IHZvaWRcbiAgICAgID0gKGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjx2b2lkPikgPT4gKCkgPT4gZW1pdHRlci5lbWl0KCk7XG5cbiAgICBjb25zdCBlbWl0SW5kZXg6IChlbWl0dGVyOiBFdmVudEVtaXR0ZXI8bnVtYmVyPikgPT4gKGluZGV4OiBudW1iZXIsIHNlbGY6IFR5cGVkKSA9PiB2b2lkXG4gICAgICA9IChlbWl0dGVyOiBFdmVudEVtaXR0ZXI8bnVtYmVyPikgPT4gKGluZGV4OiBudW1iZXIpID0+IGVtaXR0ZXIuZW1pdChpbmRleCk7XG5cbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgc3RyaW5nczogdGhpcy5zdHJpbmdzLFxuICAgICAgc3RyaW5nc0VsZW1lbnQ6IHRoaXMuc3RyaW5nc0VsZW1lbnQsXG4gICAgICB0eXBlU3BlZWQ6IHRoaXMudHlwZVNwZWVkLFxuICAgICAgc3RhcnREZWxheTogdGhpcy5zdGFydERlbGF5LFxuICAgICAgYmFja1NwZWVkOiB0aGlzLmJhY2tTcGVlZCxcbiAgICAgIHNtYXJ0QmFja3NwYWNlOiB0aGlzLnNtYXJ0QmFja3NwYWNlLFxuICAgICAgc2h1ZmZsZTogdGhpcy5zaHVmZmxlLFxuICAgICAgYmFja0RlbGF5OiB0aGlzLmJhY2tEZWxheSxcbiAgICAgIGZhZGVPdXQ6IHRoaXMuZmFkZU91dCxcbiAgICAgIGZhZGVPdXRDbGFzczogdGhpcy5mYWRlT3V0Q2xhc3MsXG4gICAgICBmYWRlT3V0RGVsYXk6IHRoaXMuZmFkZU91dERlbGF5LFxuICAgICAgbG9vcDogdGhpcy5sb29wLFxuICAgICAgbG9vcENvdW50OiB0aGlzLmxvb3BDb3VudCxcbiAgICAgIHNob3dDdXJzb3I6IHRoaXMuc2hvd0N1cnNvcixcbiAgICAgIGF1dG9JbnNlcnRDc3M6IHRoaXMuYXV0b0luc2VydENzcyxcbiAgICAgIGF0dHI6IHRoaXMuYXR0cixcbiAgICAgIGJpbmRJbnB1dEZvY3VzRXZlbnRzOiB0aGlzLmJpbmRJbnB1dEZvY3VzRXZlbnRzLFxuICAgICAgY29udGVudFR5cGU6IHRoaXMuY29udGVudFR5cGUsXG4gICAgICBvbkNvbXBsZXRlOiBlbWl0KHRoaXMuY29tcGxldGVkKSxcbiAgICAgIHByZVN0cmluZ1R5cGVkOiBlbWl0SW5kZXgodGhpcy5wcmVTdHJpbmdUeXBlZCksXG4gICAgICBvblN0cmluZ1R5cGVkOiBlbWl0SW5kZXgodGhpcy5zdHJpbmdUeXBlZCksXG4gICAgICBvbkxhc3RTdHJpbmdCYWNrc3BhY2VkOiBlbWl0KHRoaXMubGFzdFN0cmluZ0JhY2tzcGFjZWQpLFxuICAgICAgb25UeXBpbmdQYXVzZWQ6IGVtaXRJbmRleCh0aGlzLnR5cGluZ1BhdXNlZCksXG4gICAgICBvblR5cGluZ1Jlc3VtZWQ6IGVtaXRJbmRleCh0aGlzLnR5cGluZ1Jlc3VtZWQpLFxuICAgICAgb25SZXNldDogZW1pdCh0aGlzLnJlc2V0KSxcbiAgICAgIG9uU3RvcDogZW1pdEluZGV4KHRoaXMuc3RvcHBlZCksXG4gICAgICBvblN0YXJ0OiBlbWl0SW5kZXgodGhpcy5zdGFydGVkKSxcbiAgICAgIG9uRGVzdHJveTogZW1pdCh0aGlzLmRlc3Ryb3llZCksXG4gICAgfSBhcyBUeXBlZE9wdGlvbnM7XG5cbiAgICBPYmplY3Qua2V5cyhvcHRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAob3B0c1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVsZXRlIG9wdHNba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBvcHRzO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDdXJzb3JTdHlsZSgpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXh0RWxlbWVudFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudHlwaW5nJykpO1xuICAgIGNvbnN0IGN1cnNvckVsZW1lbnRTdHlsZSA9IHRoaXMuY29udGVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50eXBlZC1jdXJzb3InKS5zdHlsZTtcblxuICAgIGN1cnNvckVsZW1lbnRTdHlsZS5mb250U2l6ZSA9IHRleHRFbGVtZW50U3R5bGUuZm9udFNpemU7XG4gICAgY3Vyc29yRWxlbWVudFN0eWxlLmNvbG9yID0gdGhpcy5jdXJzb3JDb2xvciB8fCB0ZXh0RWxlbWVudFN0eWxlLmNvbG9yO1xuICB9XG59XG4iXX0=